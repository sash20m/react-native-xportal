{"version":3,"names":["Signature","Client","getSdkError","isValidArray","WALLETCONNECT_MULTIVERSX_NAMESPACE","WalletConnectProviderErrorMessagesEnum","Logger","Operation","OptionalOperation","applyTransactionSignature","addressIsValid","getCurrentSession","getCurrentTopic","getAddressFromSession","getConnectionParams","reassignWalletConnectProvider","WalletConnectProvider","chainId","address","signature","isInitializing","processingTopic","options","wasConnected","constructor","onClientConnect","walletConnectRelay","walletConnectProjectId","reset","walletConnector","undefined","session","pairings","init","isInitialized","client","relayUrl","projectId","subscribeToEvents","checkPersistedState","error","Error","unableToInit","reinitialize","_this$options","metadata","connectionProvider","Object","assign","isConnected","Promise","resolve","_","Boolean","connect","notInitialized","connectParams","_this$walletConnector","response","pairingTopic","topic","unableToConnectExisting","unableToConnect","login","_this$session","logout","approval","token","selectedNamespace","namespaces","method","methods","includes","SIGN_NATIVE_AUTH_TOKEN","SIGN_LOGIN_TOKEN","request","params","unableToSignLoginToken","onSessionConnected","unableToLogin","disconnect","reason","currentSessionTopic","cleanupPendingPairings","deletePairings","alreadyLoggedOut","getAddress","getSignature","getPairings","_this$walletConnector2","core","pairing","getAll","active","signMessage","message","sessionNotConnected","onClientLogout","SIGN_MESSAGE","toString","invalidMessageResponse","applySignature","invalidMessageSignature","unableToSign","signTransaction","transaction","plainTransaction","toPlainObject","getChainID","valueOf","requestDifferentChain","SIGN_TRANSACTION","transactionError","signTransactions","transactions","plainTransactions","map","signatures","SIGN_TRANSACTIONS","invalidTransactionResponse","Array","isArray","length","index","entries","sendCustomRequest","_options$request","invalidCustomRequestResponse","ping","pingFailed","loginAccount","onClientLogin","invalidAddress","handleTopicUpdateEvent","_ref","existingPairings","lastActivePairing","unableToHandleTopic","handleSessionEvents","_ref2","_this$session2","event","name","eventData","data","onClientEvent","_client$core","_client$core2","on","_ref3","_this$session3","_session","get","updatedSession","bind","_ref4","_this$session4","sessionDeleted","_ref5","_this$session5","sessionExpired","events","unableToHandleEvent","arguments","_this$walletConnector3","inactivePairings","_this$walletConnector4","expirer","set","_this$walletConnector5","relayer","subscriber","unsubscribe","unableToHandleCleanup"],"sourceRoot":"../../../../src","sources":["services/wallet/walletConnectProvider.ts"],"mappings":"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"}