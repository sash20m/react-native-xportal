{"version":3,"names":["_signature","require","_signClient","_interopRequireDefault","_utils","_constants","_errors","_logger","_operation","_utils2","_connectionProvider","obj","__esModule","default","WalletConnectProvider","chainId","address","signature","isInitializing","processingTopic","options","wasConnected","constructor","onClientConnect","walletConnectRelay","walletConnectProjectId","reset","walletConnector","undefined","session","pairings","init","isInitialized","client","Client","relayUrl","projectId","subscribeToEvents","checkPersistedState","error","Error","WalletConnectProviderErrorMessagesEnum","unableToInit","reinitialize","_this$options","metadata","connectionProvider","Object","assign","reassignWalletConnectProvider","isConnected","Promise","resolve","_","Boolean","connect","notInitialized","connectParams","getConnectionParams","_this$walletConnector","response","pairingTopic","topic","Logger","unableToConnectExisting","unableToConnect","login","_this$session","logout","approval","token","getAddressFromSession","selectedNamespace","namespaces","WALLETCONNECT_MULTIVERSX_NAMESPACE","method","methods","includes","OptionalOperation","SIGN_NATIVE_AUTH_TOKEN","SIGN_LOGIN_TOKEN","request","params","unableToSignLoginToken","onSessionConnected","unableToLogin","getCurrentTopic","disconnect","reason","getSdkError","currentSessionTopic","cleanupPendingPairings","deletePairings","alreadyLoggedOut","getAddress","getSignature","getPairings","_this$walletConnector2","core","pairing","getAll","active","signMessage","message","sessionNotConnected","onClientLogout","Operation","SIGN_MESSAGE","toString","invalidMessageResponse","applySignature","Signature","invalidMessageSignature","unableToSign","signTransaction","transaction","plainTransaction","toPlainObject","getChainID","valueOf","requestDifferentChain","SIGN_TRANSACTION","applyTransactionSignature","transactionError","signTransactions","transactions","plainTransactions","map","signatures","SIGN_TRANSACTIONS","invalidTransactionResponse","Array","isArray","length","index","entries","sendCustomRequest","_options$request","invalidCustomRequestResponse","ping","pingFailed","loginAccount","addressIsValid","onClientLogin","invalidAddress","handleTopicUpdateEvent","_ref","existingPairings","lastActivePairing","unableToHandleTopic","handleSessionEvents","_ref2","_this$session2","event","name","eventData","data","onClientEvent","_client$core","_client$core2","on","_ref3","_this$session3","_session","get","updatedSession","bind","_ref4","_this$session4","sessionDeleted","_ref5","_this$session5","sessionExpired","events","unableToHandleEvent","getCurrentSession","arguments","_this$walletConnector3","inactivePairings","isValidArray","_this$walletConnector4","expirer","set","_this$walletConnector5","relayer","subscriber","unsubscribe","unableToHandleCleanup","exports"],"sourceRoot":"../../../../src","sources":["services/wallet/walletConnectProvider.ts"],"mappings":"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"}